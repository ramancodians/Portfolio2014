// Set-up ===============================================================================
var express=require("express"),app=express(),compression=require("compression"),oneDay=864e5,mongoose=require("mongoose"),db=require("./config/db"),port=process.env.PORT||8080,path=require("path"),morgan=require("morgan"),bodyParser=require("body-parser"),methodOverride=require("method-override"),nodemailer=require("nodemailer");mongoose.connect(db.url);app.use(express.static(path.join(__dirname,"/public")));app.use(morgan("dev"));app.use(bodyParser.urlencoded({extended:"true"}));app.use(bodyParser.json());app.use(bodyParser.json({type:"application/vnd.api+json"}));app.use(methodOverride());var transporter=nodemailer.createTransport({service:"Gmail",auth:{user:"whymynameisalexisbertin@gmail.com",pass:"yodapowa6120"}});app.post("/sendMessage",function(e,t){var n={from:e.query.mail,to:"whymynameisalexisbertin@gmail.com",subject:"Portfolio | Contact from: "+e.query.name,text:e.query.name+" You gg: "+e.query.message};transporter.sendMail(n,function(e,t){e?console.log("NOPENOPEN: "+e):console.log("Message sent: "+t.response)});t.send("Thanks! We have sent your message.")});app.get("*",function(e,t){t.sendfile("./public/index.html")});app.listen(port);console.log("App listening on port **"+port+"**");